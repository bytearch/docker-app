version: '3.5'
services:
      oap:
        image: apache/skywalking-oap-server:8.1.0-es7 
        container_name: oap 
        #depends_on:
        #   - elasticsearch 
        links: 
           - elasticsearch 
        restart: always 
        ports: 
          - 11800:11800
          - 12800:12800
        environment: 
          SW_STORAGE: elasticsearch7 # 指定ES版本 
          SW_STORAGE_ES_CLUSTER_NODES: elasticsearch:9200 
          TZ: Asia/Shanghai
        networks:
         default:
          ipv4_address: 172.30.1.58
      ui:
        image: apache/skywalking-ui:8.1.0 
        container_name: ui 
        depends_on: 
          - oap 
        links: 
          - oap 
        restart: always 
        ports: 
          - 8091:8080 
        environment: 
          SW_OAP_ADDRESS: oap:12800 
          TZ: Asia/Shanghai
        networks:
         default:
          ipv4_address: 172.30.1.59
networks:
   default:
    external:
      name: app-network